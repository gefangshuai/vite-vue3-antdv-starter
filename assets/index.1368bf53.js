import{k as $,U as D,r as N,l as B,c as w,s as K,I as G,W as R,a6 as Q,aE as L,m as d,d as l,n as x,H as b,j as Z,Y as ee,aR as ae,ab as te,R as H,F as re,p as ne}from"./index.25ba8339.js";import{u as oe,e as ie}from"./LeftOutlined.abf01621.js";import{D as le,R as se,W as ue,X as ce,Y as ve,B as fe}from"./index.8640a124.js";import{u as de,a as pe}from"./useSize.54c8e031.js";var ge=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:D.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},me=$({name:"AAvatar",inheritAttrs:!1,props:ge(),slots:["icon"],setup:function(e,P){var z=P.slots,r=P.attrs,v=N(!0),g=N(!1),f=N(1),s=N(null),h=N(null),T=B("avatar",e),m=T.prefixCls,u=de(),a=w(function(){return e.size==="default"?u.value:e.size}),_=oe(),o=ie(function(){if(K(e.size)==="object"){var t=le.find(function(i){return _.value[i]}),n=e.size[t];return n}}),A=function(n){return o.value?{width:"".concat(o.value,"px"),height:"".concat(o.value,"px"),lineHeight:"".concat(o.value,"px"),fontSize:"".concat(n?o.value/2:18,"px")}:{}},c=function(){if(!(!s.value||!h.value)){var n=s.value.offsetWidth,i=h.value.offsetWidth;if(n!==0&&i!==0){var y=e.gap,j=y===void 0?4:y;j*2<i&&(f.value=i-j*2<n?(i-j*2)/n:1)}}},S=function(){var n=e.loadError,i=n==null?void 0:n();i!==!1&&(v.value=!1)};return G(function(){return e.src},function(){R(function(){v.value=!0,f.value=1})}),G(function(){return e.gap},function(){R(function(){c()})}),Q(function(){R(function(){c(),g.value=!0})}),function(){var t,n,i=e.shape,y=e.src,j=e.alt,M=e.srcset,X=e.draggable,Y=e.crossOrigin,E=L(z,e,"icon"),C=m.value,U=(t={},d(t,"".concat(r.class),!!r.class),d(t,C,!0),d(t,"".concat(C,"-lg"),a.value==="large"),d(t,"".concat(C,"-sm"),a.value==="small"),d(t,"".concat(C,"-").concat(i),i),d(t,"".concat(C,"-image"),y&&v.value),d(t,"".concat(C,"-icon"),E),t),V=typeof a.value=="number"?{width:"".concat(a.value,"px"),height:"".concat(a.value,"px"),lineHeight:"".concat(a.value,"px"),fontSize:E?"".concat(a.value/2,"px"):"18px"}:{},F=(n=z.default)===null||n===void 0?void 0:n.call(z),I;if(y&&v.value)I=l("img",{draggable:X,src:y,srcset:M,onError:S,alt:j,crossorigin:Y},null);else if(E)I=E;else if(g.value||f.value!==1){var k="scale(".concat(f.value,") translateX(-50%)"),q={msTransform:k,WebkitTransform:k,transform:k},J=typeof a.value=="number"?{lineHeight:"".concat(a.value,"px")}:{};I=l(se,{onResize:c},{default:function(){return[l("span",{class:"".concat(C,"-string"),ref:s,style:x(x({},J),q)},[F])]}})}else I=l("span",{class:"".concat(C,"-string"),ref:s,style:{opacity:0}},[F]);return l("span",b(b({},r),{},{ref:h,class:U,style:x(x(x({},V),A(!!E)),r.style)}),[I])}}}),O=me,ye=function(){return x(x({},ue()),{content:D.any,title:D.any})},xe=$({name:"APopover",props:ee(ye(),x(x({},ce()),{trigger:"hover",transitionName:"zoom-big",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1})),setup:function(e,P){var z=P.expose,r=P.slots,v=N();z({getPopupDomNode:function(){var u,a;return(a=(u=v.value)===null||u===void 0?void 0:u.getPopupDomNode)===null||a===void 0?void 0:a.call(u)}});var g=B("popover",e),f=g.prefixCls,s=g.configProvider,h=w(function(){return s.getPrefixCls()}),T=function(){var u,a,_=e.title,o=_===void 0?H((u=r.title)===null||u===void 0?void 0:u.call(r)):_,A=e.content,c=A===void 0?H((a=r.content)===null||a===void 0?void 0:a.call(r)):A,S=!!(Array.isArray(o)?o.length:o),t=!!(Array.isArray(c)?c.length:o);if(!(!S&&!t))return l(re,null,[S&&l("div",{class:"".concat(f.value,"-title")},[o]),l("div",{class:"".concat(f.value,"-inner-content")},[c])])};return function(){return l(ve,b(b({},te(e,["title","content"])),{},{prefixCls:f.value,ref:v,transitionName:ae(h.value,"zoom-big",e.transitionName)}),{title:T,default:r.default})}}}),Pe=Z(xe),he=function(){return{prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"}}},Se=$({name:"AAvatarGroup",inheritAttrs:!1,props:he(),setup:function(e,P){var z=P.slots,r=P.attrs,v=B("avatar-group",e),g=v.prefixCls,f=v.direction;return pe(e),function(){var s,h=e.maxPopoverPlacement,T=h===void 0?"top":h,m=e.maxCount,u=e.maxStyle,a=e.maxPopoverTrigger,_=a===void 0?"hover":a,o=(s={},d(s,g.value,!0),d(s,"".concat(g.value,"-rtl"),f.value==="rtl"),d(s,"".concat(r.class),!!r.class),s),A=L(z,e),c=ne(A).map(function(i,y){return fe(i,{key:"avatar-key-".concat(y)})}),S=c.length;if(m&&m<S){var t=c.slice(0,m),n=c.slice(m,S);return t.push(l(Pe,{key:"avatar-popover-key",content:n,trigger:_,placement:T,overlayClassName:"".concat(g.value,"-popover")},{default:function(){return[l(O,{style:u},{default:function(){return["+".concat(S-m)]}})]}})),l("div",b(b({},r),{},{class:o,style:r.style}),[t])}return l("div",b(b({},r),{},{class:o,style:r.style}),[c])}}}),W=Se;O.Group=W;O.install=function(p){return p.component(O.name,O),p.component(W.name,W),p};export{O as A};
